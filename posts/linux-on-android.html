<!DOCTYPE html> <html lang="en"><head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Running Ubuntu/Linux on Android | Vinay Jain</title> <meta name="generator" content="Jekyll v4.4.1"/> <meta property="og:title" content="Running Ubuntu/Linux on Android"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="For all your DIY needs an Android phone can completely replace a Raspberry-Pi"/> <meta property="og:description" content="For all your DIY needs an Android phone can completely replace a Raspberry-Pi"/> <link rel="canonical" href="https://vinayjain.me/posts/linux-on-android"/> <meta property="og:url" content="https://vinayjain.me/posts/linux-on-android"/> <meta property="og:site_name" content="Vinay Jain"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2020-06-17T00:00:00+01:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Running Ubuntu/Linux on Android"/> <meta name="twitter:site" content="@vinayjn7"/> <meta name="google-site-verification" content="aiR9EuE5YjF6QsTSZzDbX_aQcQQINSTVPMgT1ru97ls"/> <script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2020-06-17T00:00:00+01:00","datePublished":"2020-06-17T00:00:00+01:00","description":"For all your DIY needs an Android phone can completely replace a Raspberry-Pi","headline":"Running Ubuntu/Linux on Android","mainEntityOfPage":{"@type":"WebPage","@id":"https://vinayjain.me/posts/linux-on-android"},"url":"https://vinayjain.me/posts/linux-on-android"}</script> <link rel="stylesheet" href="/assets/css/normalize.css"> <link id="theme-link" rel="stylesheet" href="/assets/css/light.css"><link type="application/atom+xml" rel="alternate" href="https://vinayjain.me/feed.xml" title="Vinay Jain"/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-128287990-1"></script> <script>function gtag(){dataLayer.push(arguments)}window["ga-disable-UA-128287990-1"]="1"===window.doNotTrack||"1"===navigator.doNotTrack||"yes"===navigator.doNotTrack||"1"===navigator.msDoNotTrack,window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-128287990-1");</script> </head> <body><header> <div class="wrapper header"> <div class="upper"> <a href="/" class="left-nav"> <h5 class="mClear nav-root"> $ cd /home/</h5> <span class="nav-cursor"></span> </a> <div class="right-nav"> <nav> <a id="menu" class="burger-nav"> <svg class="icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z"/> <path d="M2 12.0322C2 11.4799 2.44772 11.0322 3 11.0322H21C21.5523 11.0322 22 11.4799 22 12.0322C22 12.5845 21.5523 13.0322 21 13.0322H3C2.44772 13.0322 2 12.5845 2 12.0322Z"/> <path d="M3 17.0645C2.44772 17.0645 2 17.5122 2 18.0645C2 18.6167 2.44772 19.0645 3 19.0645H21C21.5523 19.0645 22 18.6167 22 18.0645C22 17.5122 21.5523 17.0645 21 17.0645H3Z"/> </svg> </a> <ul id="nav-trigger"> <li><a href="/all-posts/"> Blog</a></li><li><a href="/bookshelf/"> Books</a></li> </ul> </nav> </div> </div><ul class="social-links"><li class="social-link"> <a target="_blank" href="https://www.linkedin.com/in/vinayjn/"> <svg class="icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M13 21H9V9H13V11C13.8526 9.91525 15.1456 9.26857 16.525 9.237C19.0056 9.25077 21.0072 11.2694 21 13.75V21H17V14.25C16.84 13.1326 15.8818 12.3036 14.753 12.306C14.2593 12.3216 13.7932 12.5378 13.4624 12.9046C13.1316 13.2715 12.9646 13.7573 13 14.25V21ZM7 21H3V9H7V21ZM5 7C3.89543 7 3 6.10457 3 5C3 3.89543 3.89543 3 5 3C6.10457 3 7 3.89543 7 5C7 5.53043 6.78929 6.03914 6.41421 6.41421C6.03914 6.78929 5.53043 7 5 7Z"/> </svg> </a> </li><li class="social-link"> <a target="_blank" href="https://github.com/vinayjn"> <svg class="icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M12.026 2C7.13295 1.99937 2.96183 5.54799 2.17842 10.3779C1.395 15.2079 4.23061 19.893 8.87302 21.439C9.37302 21.529 9.55202 21.222 9.55202 20.958C9.55202 20.721 9.54402 20.093 9.54102 19.258C6.76602 19.858 6.18002 17.92 6.18002 17.92C5.99733 17.317 5.60459 16.7993 5.07302 16.461C4.17302 15.842 5.14202 15.856 5.14202 15.856C5.78269 15.9438 6.34657 16.3235 6.66902 16.884C6.94195 17.3803 7.40177 17.747 7.94632 17.9026C8.49087 18.0583 9.07503 17.99 9.56902 17.713C9.61544 17.207 9.84055 16.7341 10.204 16.379C7.99002 16.128 5.66202 15.272 5.66202 11.449C5.64973 10.4602 6.01691 9.5043 6.68802 8.778C6.38437 7.91731 6.42013 6.97325 6.78802 6.138C6.78802 6.138 7.62502 5.869 9.53002 7.159C11.1639 6.71101 12.8882 6.71101 14.522 7.159C16.428 5.868 17.264 6.138 17.264 6.138C17.6336 6.97286 17.6694 7.91757 17.364 8.778C18.0376 9.50423 18.4045 10.4626 18.388 11.453C18.388 15.286 16.058 16.128 13.836 16.375C14.3153 16.8651 14.5612 17.5373 14.511 18.221C14.511 19.555 14.499 20.631 14.499 20.958C14.499 21.225 14.677 21.535 15.186 21.437C19.8265 19.8884 22.6591 15.203 21.874 10.3743C21.089 5.54565 16.9181 1.99888 12.026 2Z"/> </svg> </a> </li><li class="social-link"> <a target="_blank" href="https://twitter.com/vinayjn7"> <svg class="icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M19.995 6.688C20.8914 6.15209 21.5622 5.30824 21.882 4.314C21.0397 4.81381 20.118 5.16588 19.157 5.355C17.8246 3.94553 15.7135 3.60253 14.0034 4.51766C12.2933 5.43279 11.4075 7.37949 11.841 9.27C8.39062 9.09678 5.17598 7.46692 2.99702 4.786C1.85986 6.74742 2.44097 9.25479 4.32502 10.516C3.64372 10.4941 2.97754 10.3096 2.38202 9.978C2.38202 9.996 2.38202 10.014 2.38202 10.032C2.38241 12.0752 3.82239 13.8351 5.82502 14.24C5.19308 14.4119 4.53022 14.4372 3.88702 14.314C4.45021 16.0613 6.06057 17.2583 7.89601 17.294C6.37585 18.4871 4.49849 19.1342 2.56602 19.131C2.22349 19.1315 1.88123 19.1118 1.54102 19.072C3.50341 20.333 5.78738 21.0024 8.12001 21C11.3653 21.0223 14.484 19.7429 16.7787 17.448C19.0734 15.1531 20.3526 12.0343 20.33 8.789C20.33 8.603 20.3257 8.418 20.317 8.234C21.1575 7.62661 21.8828 6.87415 22.459 6.012C21.676 6.35907 20.8455 6.58693 19.995 6.688Z"/> </svg> </a> </li><li class="social-link"> <a target="_blank" href="https://stackoverflow.com/users/2286267/vinay-jain"> <svg class="icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M18.84 20.999H4.38098V14.599H5.98098V19.399H17.24V14.599H18.84V20.999ZM15.64 17.799H7.58098V16.199H15.636V17.799H15.64ZM15.64 15.799L7.78098 14.16L8.11898 12.608L15.98 14.25L15.637 15.799H15.64ZM16.079 13.762L8.79898 10.362V10.356L9.47298 8.899L16.754 12.299L16.081 13.763L16.079 13.762ZM17.002 11.917L10.832 6.777H10.841L11.854 5.563L18.016 10.699L16.999 11.918L17.002 11.917ZM18.31 10.417L13.503 3.968L14.813 2.999L19.619 9.45L18.307 10.421L18.31 10.417Z"/> </svg> </a> </li></ul> </div> </header><main class="page-content" aria-label="Content"> <div class="wrapper"> <article class="h-entry" itemscope itemtype="http://schema.org/BlogPosting"><h2 class="mClear page-title" itemprop="name headline">Running Ubuntu/Linux on Android</h1> <div class="post-content e-content" itemprop="articleBody"> <p>Phones have become very powerful these days. Its easy to find an Android phone under $200 that is capable of powering up a desktop computer with decent performance. I was thinking about setting up a media server in my home network so I can watch movies and TV shows on all devices, I was convinced to use a Raspberry Pie for this but then I thought what if I use my Android phone for the same, its much more capable than a pie and has a lot hardware capabilities that the pie doesn’t offer out of the box. So I set course and took out my old Android phone, did some hacking and got the media server working on it. Its a long process to setup the media server and the first step in getting their is to install Ubuntu or any other Linux distribution on the Android phone. I’ll talk about the media server setup some other day but lets see how to install Ubuntu on Android.</p> <h4 id="getting-the-device-ready">Getting the device ready</h4> <p>Most of the people I know have at least one abandoned Android phone. Though its completely fine to do, I don’t recommend using your primary phone to follow this post as it would end your phone’s warranty. If you are willing to take the risk you can still follow. First, make sure you have the following items checked:</p> <ul> <li>A phone running Android 7+ with root access</li> <li>Basic knowledge of Linux and ssh</li> <li>Internet connection</li> </ul> <p>I have tested this approach on the following configurations</p> <ul> <li>Xiaomi Redmi Note 5 Pro, running Lineage OS 17.1(Android 10), Qualcomm SDM636 Snapdragon 636 arm64 processor</li> <li>Xiaomi Redmi 1s, running Lineage OS 14.1(Android 7.1.2) Qualcomm MSM8228 Snapdragon 400 ARM processor</li> </ul> <h4 id="configuration">Configuration</h4> <p>Linux Deploy is an app that makes this process easy, go ahead and install the app from <a href="https://play.google.com/store/apps/details?id=ru.meefik.linuxdeploy">Google Play Store</a>. You will need root access enabled on your device to get it working. The app greets you with a screen like in the screenshot below, please not that I am currently using version 2.6.0 it might differ if you use another app version.</p> <div class="align-center"> <img height="100%" width="100%" src="/images/linux/Linux_Deploy_1.jpg"/> </div> <p>The instructions are pretty straight-forward and needs no explanation. Tap on the little settings button at the bottom right and you’ll see a screen as shown below, you can follow the configuration you see here or you can change according to your preference. One important thing to choose is the architecture, in the screenshot you see <code class="language-plaintext highlighter-rouge">arm64</code> which is same as the android phone’s CPU architecture. Its fine to use other architectures as well but I recommend choosing the one which is most compatible with the software you are going to install in the future. The media server I wanted to install works well with the <code class="language-plaintext highlighter-rouge">arm64</code>. Also, if you don’t know the CPU architecture of your phone you can install CPU-Z from the play store.</p> <div class="align-center"> <img height="100%" width="100%" src="/images/linux/Linux_Deploy_2.png"/> </div> <div class="align-center"> <img height="100%" width="100%" src="/images/linux/Linux_Deploy_3.png"/> </div> <div class="align-center"> <img height="100%" width="100%" src="/images/linux/Linux_Deploy_4.png"/> </div> <div class="align-center"> <img height="100%" width="100%" src="/images/linux/Linux_Deploy_5.png"/> </div> <p>More about configuration:</p> <ul> <li>Image Size - Consider this as the partition size for your Linux installation.</li> <li>Username &amp; Password - Use anything, we will use it to login with ssh</li> <li>Privileged Users - Additional custom permissions for the user</li> <li>Mount points - Use it to mount your internal or external sdcard to use in Ubuntu, more on this later</li> <li>SSH - Enable this, we want to access this system inside our home network with ssh.</li> <li>Audio - We don’t need it for our usecase</li> <li>GUI - Since most of the time we will be accessing it through SSH I have skipped the GUI part. If you need GUI then you can setup a VNC viewer and configure it easily.</li> </ul> <p>This is all the configuration that we need for now. Tap on the three dots on the top right and select <code class="language-plaintext highlighter-rouge">Install</code>, the app will be downloading the entire linux image based on our configuration. Depending on your internet speed, if everything went well, you should see a screen as shown below. Now tap on the <code class="language-plaintext highlighter-rouge">Start</code> button on the bottom left. The app will validate the configuration and start all the services of the Linux distribution. The result is a fully functional linux operating system just like we have on a desktop computer.</p> <div class="align-center"> <img height="100%" width="100%" src="/images/linux/Linux_Deploy_6.png"/> </div> <div class="align-center"> <img height="100%" width="100%" src="/images/linux/Linux_Deploy_7.png"/> </div> <p>At this point we can access this system using ssh. The IP is shown at the top, for me its <code class="language-plaintext highlighter-rouge">192.168.0.137</code>, it might be different for you. From a computer in the same network, you can use the below commands in any shell to login and when it asks for the password just use the password you entered during the configuration, if you forgot your password you can get it by tapping on the settings button on the bottom right.</p> <figure class="highlight"><pre><code class="language-bash" data-lang="bash">ssh &lt;username&gt;@&lt;IP&gt;

// <span class="k">if </span>your user name is android and IP is 192.168.0.137, use:
ssh android@192.168.0.137

// Type <span class="nb">yes </span>when it asks you to <span class="k">continue </span>connecting to the host
// and enter your password when it asks <span class="k">for </span>it</code></pre></figure> <p>You are now logged-in to the system and can perform any operations as you want. If you want to avoid entering your password when you login, you can put the public ssh key of your computer in the <code class="language-plaintext highlighter-rouge">~/.ssh/authorized_keys</code> file. If its not there you’ll have to create it, you can easily find articles on the web if you don’t know how to do it.</p> <div class="align-center"> <img height="100%" width="100%" src="/images/linux/Linux_Deploy_8.png"/> </div> <h4 id="mounting-internal-and-external-sdcard">Mounting internal and external sdcard</h4> <p>If you are not able to access the phone’s internal storage in the linux file system you will have to map the mount path of the storage in Android file system to a mount point in linux file system. To do this you have to find where is the sdcard mounted in the Android, there are two ways, one with <code class="language-plaintext highlighter-rouge">adb</code> and other by <code class="language-plaintext highlighter-rouge">installing any file manager app</code>. I am going to tell you the <code class="language-plaintext highlighter-rouge">adb</code> way because I don’t want to install any other app for a small usecase. Connect your phone to your computer, make sure USB debugging is enabled, from the terminal execute the following commands</p> <figure class="highlight"><pre><code class="language-bash" data-lang="bash">➜  ~ adb devices
List of devices attached
f4936abb	device

➜  ~ adb shell
whyred:/ <span class="nv">$ </span><span class="nb">df
</span>Filesystem               1K-blocks    Used Available Use% Mounted on
tmpfs                      2917628    1020   2916608   1% /dev
tmpfs                      2917628       0   2917628   0% /mnt
tmpfs                      2917628       0   2917628   0% /apex
/dev/block/mmcblk0p61      3096336 1637424   1442528  54% /
/dev/block/mmcblk0p62       806288  414160    375744  53% /vendor
tmpfs                      2917628    6432   2911196   1% /sbin
/dev/block/mmcblk0p48        12016    7480      4212  64% /vendor/dsp
/dev/block/mmcblk0p60       237536     212    229464   1% /cache
/sbin/.magisk/block/data  52885008 8501436  44236116  17% /sbin/.magisk/modules
/data/media               52885008 8501436  44236116  17% /storage/emulated
whyred:/ <span class="err">$</span></code></pre></figure> <p>As you can guess by the size of the partition, the internal storage in my device is mounted on <code class="language-plaintext highlighter-rouge">/storage/emulated</code>.</p> <p>Now just create a mount path in linux file system for this path. Open the Linux Deploy app on your phone, stop the container if its running. Go to the mount points settings and tap on the plus button on the top right.</p> <div class="align-center"> <img height="100%" width="100%" src="/images/linux/Linux_Deploy_10.png"/> </div> <p>The Android path <code class="language-plaintext highlighter-rouge">/storage/emulated</code> goes in the <code class="language-plaintext highlighter-rouge">Source</code> field and the linux path goes in the <code class="language-plaintext highlighter-rouge">Target</code>. Tap on <code class="language-plaintext highlighter-rouge">OK</code> and start the container again, login to the system and see if you can access the sdcard. You will probably see <code class="language-plaintext highlighter-rouge">Permission Denied</code> error when you try to access the folder, its because the user is not part of the <code class="language-plaintext highlighter-rouge">root</code> or <code class="language-plaintext highlighter-rouge">aid_everybody</code> groups you can check that by the command</p> <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span>
total 8
drwx--x--x. 3 root aid_everybody 4096 Jul 17 21:00 sdcard

<span class="nv">$ </span><span class="nb">groups </span>android
android : android aid_graphics aid_sdcard_rw aid_inet </code></pre></figure> <p>We can fix that by adding the linux user(android in my case) to the <code class="language-plaintext highlighter-rouge">aid_everybody</code> group. Use the command below to do this, you will have to logout and then login again to let this change take effect.</p> <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>usermod <span class="nt">-a</span> <span class="nt">-G</span> aid_everybody android
<span class="nv">$ </span><span class="nb">exit
</span>Connection to 192.168.0.137 closed.

// Login again and check
<span class="nv">$ </span><span class="nb">cd </span>sdcard
<span class="nv">$ </span><span class="nb">ls
</span>0
<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-l</span> 0
total 1623408
drwxrwx---. 2 root aid_everybody       4096 Jun 17 09:02 Alarms
drwxrwx---. 4 root aid_everybody       4096 Jun 17 09:02 Android
drwxrwx---. 3 root aid_everybody       4096 Jun 19 10:33 DCIM
drwxrwx---. 2 root aid_everybody       4096 Jun 17 13:26 Documents
drwxrwx---. 4 root aid_everybody       4096 Jul 18 08:36 Download
<span class="nt">-rw-rw----</span><span class="nb">.</span> 1 root aid_everybody 8589934592 Jul 24 19:57 linux.img
drwxrwx---. 3 root aid_everybody       4096 Jun 17 13:25 Movies
drwxrwx---. 2 root aid_everybody       4096 Jun 17 09:02 Music
drwxrwx---. 2 root aid_everybody       4096 Jun 17 09:02 Notifications
drwxrwx---. 5 root aid_everybody       4096 Jul 15 18:14 Pictures
drwxrwx---. 2 root aid_everybody       4096 Jun 17 09:02 Podcasts
drwxrwx---. 2 root aid_everybody       4096 Jun 17 09:02 Ringtones
drwxrwx---. 2 root aid_everybody       4096 Jun 17 09:51 Shows</code></pre></figure> <p>For external sdcard, just repeat these steps and use the correct mount points to access all the files on it.</p> <p>Okay, that’s all folks, if you reached here you have a fully functional linux machine. This was a long process, but we are just getting started, there’s a lot more we can achieve with it. In the future posts I will be telling you how you can extend this</p> <ul> <li>As an ad-block proxy server for your home network with Pi-Hole.</li> <li>A media server to stream your favorite movies and TV Shows with Plex.</li> </ul> <p>If you have more ideas in mind please let me know. :)</p> </div><div id="disqus_thread"></div> <script>var disqus_config=function(){this.page.url="https://vinayjain.me/posts/linux-on-android",this.page.identifier="https://vinayjain.me/posts/linux-on-android"};!function(){var t=document,e=t.createElement("script");e.src="https://koderme.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/posts/linux-on-android" hidden></a> </article> </div> </main> <footer> <p>© Vinay Jain 2022 </p> </footer> <script src="/assets/js/main.js?v=2"></script> </body> </html>