<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Regex: Pipe operator to find alternatives | Vinay Jain</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Regex: Pipe operator to find alternatives" />
<meta name="author" content="vinayjn7" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Pipe operator in regex works the same way as in other languages, the logical OR." />
<meta property="og:description" content="Pipe operator in regex works the same way as in other languages, the logical OR." />
<link rel="canonical" href="https://vinayjain.me/posts/pipes-in-regular-expressions" />
<meta property="og:url" content="https://vinayjain.me/posts/pipes-in-regular-expressions" />
<meta property="og:site_name" content="Vinay Jain" />
<meta property="og:image" content="https://vinayjain.me/pipes-in-regular-expressions.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-11T06:39:25+05:30" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://vinayjain.me/pipes-in-regular-expressions.jpg" />
<meta property="twitter:title" content="Regex: Pipe operator to find alternatives" />
<meta name="twitter:site" content="@vinayjn7" />
<meta name="twitter:creator" content="@vinayjn7" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"https://vinayjain.me/posts/pipes-in-regular-expressions"},"url":"https://vinayjain.me/posts/pipes-in-regular-expressions","author":{"@type":"Person","name":"vinayjn7"},"@type":"BlogPosting","image":"https://vinayjain.me/pipes-in-regular-expressions.jpg","description":"Pipe operator in regex works the same way as in other languages, the logical OR.","headline":"Regex: Pipe operator to find alternatives","dateModified":"2021-01-11T06:39:25+05:30","datePublished":"2021-01-11T06:39:25+05:30","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/normalize.css" >  
  <link rel="stylesheet" href="/assets/css/light.css"><link type="application/atom+xml" rel="alternate" href="https://vinayjain.me/feed.xml" title="Vinay Jain" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-128287990-1"></script>
<script>
  window['ga-disable-UA-128287990-1'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-128287990-1');
</script>
</head>
<body><header>
  <div class="wrapper header">    
    <div class="upper">
      <a href="/" class="left-nav">
        <h5 class="mClear nav-root"> $ cd /home/</h5>
        <span class="nav-cursor"></span>
      </a>
      <div class="right-nav">
        <nav>
          <a id="menu" class="burger-nav">
            <svg class="icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z"/>
              <path d="M2 12.0322C2 11.4799 2.44772 11.0322 3 11.0322H21C21.5523 11.0322 22 11.4799 22 12.0322C22 12.5845 21.5523 13.0322 21 13.0322H3C2.44772 13.0322 2 12.5845 2 12.0322Z"/>
              <path d="M3 17.0645C2.44772 17.0645 2 17.5122 2 18.0645C2 18.6167 2.44772 19.0645 3 19.0645H21C21.5523 19.0645 22 18.6167 22 18.0645C22 17.5122 21.5523 17.0645 21 17.0645H3Z"/>
            </svg>
          </a>
          <ul id="nav-trigger">

            <li><a href="/all-posts/"> Blog</a></li><li><a href="/bookshelf/"> Books</a></li><li><a href="/usesthis/"> Uses This</a></li>                        
            </ul>
        </nav>               
      </div>
    </div><ul class="social-links"></ul>  </div>
</header><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  
  <h2 class="mClear page-title" itemprop="name headline">Regex: Pipe operator to find alternatives</h1>    
  
  <div class="post-content e-content" itemprop="articleBody">
    <p>Regular expressions are probably one of the most under-pursued yet powerful and useful Computer Science skills. As a programmer, in common day-to-day tasks like text–search, replace and input validation I find regular expression to be very efficient. Almost all modern languages and operating systems support text processing with regex and having them in my toolbox makes my workflow more productive.</p>

<p>Recently, for a side-project I wanted to validate an IP address(IPv4) input by the user. I decided to validate it with regular expressions and quickly came up with a basic pattern for the happy flow–</p>

<pre class="splash"><code>^[<span class="number">0</span>-<span class="number">9</span>]{<span class="number">1</span>,<span class="number">3</span>}\.[<span class="number">0</span>-<span class="number">9</span>]{<span class="number">1</span>,<span class="number">3</span>}\.[<span class="number">0</span>-<span class="number">9</span>]{<span class="number">1</span>,<span class="number">3</span>}\.[<span class="number">0</span>-<span class="number">9</span>]{<span class="number">0</span>,<span class="number">3</span>}$
</code></pre>

<p>As you can see this expression gives false positives for invalid IP addresses like <code class="language-plaintext highlighter-rouge">999.999.999.999</code>. Looks like validating an IP address with a regular expression isn’t as easy as expected. Let’s break it down into smaller sub-problems.</p>

<p>To write the correct pattern we first need to list down all the valid cases for an IP address. All IPv4 addresses are divided into 4 groups separated with three dots and each of these groups follow the same rules. For an IP address to qualify as validated, each group should be validated by a pattern which considers the following cases:</p>

<div class="image-box">
<img class="image-box-item" width="100%" height="100%" src="/images/ip-validation-rules.png" />
</div>

<p>With this picture it is clear that we need to put some kind of <code class="language-plaintext highlighter-rouge">if–else</code> logic to validate our input. In a programming language this is a trivial task, split the input by dots and validate each group with <code class="language-plaintext highlighter-rouge">if–else</code> condtions. But I decided to stick with the regular expression approach and continue writing the match pattern.</p>

<h3 id="pipe-operator">Pipe Operator</h3>

<p>The pipe operator in a regular expression has the same behaviour as in programming languages, it does the logical OR of the operands and returns any of the matching strings. Have a look at the example below to understand it better.</p>

<pre class="splash"><code><span class="keyword">let</span> pattern = <span class="string">"(desk|lap)tops"</span>

<span class="keyword">let</span> regex = <span class="type">Regex</span>(with: pattern)

<span class="keyword">let</span> inputString = <span class="string">"desktops and laptops and not palmtops"</span>

regex.<span class="call">findMatch</span>(inputString)

<span class="comment">// Returns: desktops, laptops</span> 
</code></pre>

<p>For IP addresses, in a group, we have to either match one digit, two digits or three digits and additionally cover all the valid cases mentioned in the figure above. And then repeat it four times to validate the entire input. For one group the regex pattern looks like the one shown below:</p>

<div class="image-box">
<img class="image-box-item" width="100%" height="100%" src="/images/one-group-regex.png" />
</div>

<p>Okay, if you are thinking this is long just remember that its just for one single group, copy-paste it three more times and check the length. In situations like these when a pattern is repeating we can tell regex to match exactly a particular number of occurences with the help of <code class="language-plaintext highlighter-rouge">{}</code>. Lets assume that we call the group pattern as shown above as “part”. Our final regex will look like this:</p>

<div class="image-box">
<img class="image-box-item" width="100%" height="100%" src="/images/complete-regex.png" />
</div>

<p>In code, by making the “part” as a variable, the pattern can look exactly like the one shown in figure, let’s see how it looks in Swift:</p>

<pre class="splash"><code><span class="keyword">func</span> isValidIPAddress(<span class="keyword">_</span> ip: <span class="type">String</span>) -&gt; <span class="type">Bool</span> {
    <span class="keyword">let</span> part = <span class="string">"[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]"</span>

    <span class="keyword">let</span> pattern = <span class="string">"^</span>\(part)<span class="string">\\.{3}</span>\(part)<span class="string">$"</span>

    <span class="keyword">return</span> ip.<span class="call">range</span>(of: pattern, options: .<span class="dotAccess">regularExpression</span>) != <span class="keyword">nil</span>
}
</code></pre>

<p>If we had chosen to match each group with conditional statements we would’ve filled our code with <code class="language-plaintext highlighter-rouge">if–else</code> blocks and that would have increased the size of this function by about 4–5 times. With regular expressions our code looks short and clean. Though at first the long patterns make it a little difficult to understand but as you get to know more about regex these patterns start to make a lot of sense. This is one of the many great super powers of regex and like most of the skills in Computer Science, though they are not mandatory but using them will definitely give you a step-up.</p>

<p>Thanks for reading, please let me know if you have any feedback.</p>

  </div><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://vinayjain.me/posts/pipes-in-regular-expressions';
      this.page.identifier = 'https://vinayjain.me/posts/pipes-in-regular-expressions';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://koderme.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/posts/pipes-in-regular-expressions" hidden></a>
</article>

      </div>
    </main>    

    <footer>
      <p>Made with ♥︎ by Vinay Jain</p>
    </footer>
    <script src="/assets/js/main.js"></script>
  </body>

</html>
