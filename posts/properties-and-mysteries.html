<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Vinay Jain | Demystifying @property and attributes</title>
  <meta name="description" content="Understanding what the keywords in between those parentheses mean.">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="Demystifying @property and attributes">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/posts/properties-and-mysteries">
  <meta property="og:description" content="Understanding what the keywords in between those parentheses mean.">
  <meta property="og:site_name" content="Vinay Jain">
  <meta property="og:image" content="/assets/og-image.jpg">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="/posts/properties-and-mysteries">
  <meta name="twitter:title" content="Demystifying @property and attributes">
  <meta name="twitter:description" content="Understanding what the keywords in between those parentheses mean.">
  <meta name="twitter:image" content="/assets/og-image.jpg">

  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
  <link href="/feed.xml" type="application/rss+xml" rel="alternate" title="Vinay Jain Last 10 blog posts" />

  
    <link type="text/css" rel="stylesheet" href="/assets/light.css">
  
</head>

<body>
  <main role="main">
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav reveal">
    <a href="/" class="header-logo" title="Vinay Jain">Vinay Jain</a>
    <br>Keyboards &amp; Pencils

  <ul class="header-links">
    
    
      <li>
        <a href="https://twitter.com/@v1n4yjn" target="_blank" title="Twitter">
          <span class="icon icon-social-twitter"></span>
        </a>
      </li>
    
    
      <li>
        <a href="https://www.facebook.com/vinay.jn7" target="_blank" title="Facebook">
          <span class="icon icon-social-facebook"></span>
        </a>
      </li>
    
    
      <li>
        <a href="https://github.com/vinayjn" target="_blank" title="GitHub">
          <span class="icon icon-social-github"></span>
        </a>
      </li>
    
    
    
    
    
    
      <li>
        <a href="mailto:vinay.jn7@gmail.com" title="Email">
          <span class="icon icon-at"></span>
        </a>
      </li>
    
    
  </ul>
</nav>

        <article class="article reveal">
          <header class="article-header">
            <h1>Demystifying @property and attributes</h1>
            <p>Understanding what the keywords in between those parentheses mean.</p>
            <div class="article-list-footer">
              <span class="article-list-date">
                July 25, 2017
              </span>
              <span class="article-list-divider">-</span>
              <span class="article-list-minutes">
                
                
                  3 minute read
                
              </span>
              <span class="article-list-divider">-</span>
              <div class="article-list-tags">
                
                  <a href="/tag/ios">ios</a>
                
                  <a href="/tag/objc">objc</a>
                
              </div>
            </div>
          </header>

          <div class="article-content">
            <p>Whenever we declare properties in Objective-C there are some keywords between the parentheses like <code class="highlighter-rouge">strong</code>, <code class="highlighter-rouge">weak</code>,  <code class="highlighter-rouge">atomic</code>, <code class="highlighter-rouge">nonatomic</code>. There can be multiple comma separated words in between the parentheses, sometimes we don’t add any keywords there and keep the default compiler behavior. In this post we’ll discuss what these keywords/attributes actually mean and what are the effects of using one over the other. <code class="highlighter-rouge"><span class="k">@property</span></code> are specific to Objective-C but the concepts can be applied to Swift as well, if you are a Swift only dev I still recommend going through this post once.</p>

<p>Broadly, the change in behavior of a property with these words fall into three categories, lets see what they are:</p>

<ul>
  <li>
    <h3 id="atomicity-atomic-nonatomic">Atomicity (atomic, nonatomic)</h3>

    <ul>
      <li>
        <h4 id="atomic">atomic</h4>
        <p>atomic is the default behavior, if we don’t type atomic or nonatomic then the property is atomic. atomic ensures that if we try to read the property we always get some valid value, it will never be junk or garbage data.</p>

        <p>Lets say, multiple threads are reading and writing the property simultaneously, at each and every instant the value read from the property is a good value. We don’t know what the value will be, it can be the value before the new value gets written or it can be the new value.</p>
      </li>
      <li>
        <h4 id="nonatomic">nonatomic</h4>
        <p>As it is (non)atomic it doesn’t do whatever atomic does. To make a property nonatomic we have to add this keyword in between the parentheses. With nonatomic properties you lose the guarantee on the validity of values, reading a nonatomic property can return a garbage value.</p>
      </li>
    </ul>

    <p>Since atomic somehow manages the validity of the value, it has some performance limitations. Access to atomic properties are relatively slower than nonatomic properties. If you are creating properties which involve frequent write operations then it is recommended to make the properties nonatomic.</p>

    <p>There’s a confusion in most developer’s mind that creating a property atomic makes it thread-safe. Atomicity has nothing to do with thread-safety. There are other ways to make the properties thread-safe but that discussion is beyond the scope of this post.</p>
  </li>
  <li>
    <h3 id="write-access-readonly-readwrite">Write Access (readonly, readwrite)</h3>

    <p>Both of these keywords are self explanatory. The default behavior is readwrite, so if we don’t specify any of these the property will allow write access to the variable. readonly restricts write access from everyone including the class it is declared in.</p>

    <p>To allow write access to the property in the class then we have to create an interface extension in the implementation file and override the property by making it readwrite. This way the classes importing this class will be restricted to modify its value.</p>
  </li>
</ul>

<div class="language-objc highlighter-rouge"><pre class="highlight"><code><span class="c1">// MyClass.h
</span>
<span class="k">@interface</span> <span class="nc">MyClass</span><span class="p">:</span> <span class="nc">NSObject</span>

<span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">readonly</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">value</span><span class="p">;</span>

<span class="k">@end</span>

<span class="c1">// MyClass.m
</span>
<span class="k">@interface</span> <span class="nc">MyClass</span><span class="p">()</span>

<span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">readwrite</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">value</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyClass</span>

<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setSomeValue</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">newValue</span> <span class="p">{</span>
    <span class="n">self</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">newValue</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@end</span>
</code></pre>
</div>

          </div>

          <div class="article-share">
            
            <a href="" title="Share on Twitter" onclick="window.open('https://twitter.com/home?status=Demystifying @property and attributes - /posts/properties-and-mysteries by @@v1n4yjn', 'newwindow', 'width=500, height=225'); return false;">
              <span class="icon icon-social-twitter"></span>
            </a>
            <a href="" title="Share on Facebook" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=/posts/properties-and-mysteries', 'newwindow', 'width=500, height=500'); return false;">
              <span class="icon icon-social-facebook"></span>
            </a>
            <a href="" title="Share on Google+" onclick="window.open('https://plus.google.com/share?url=/posts/properties-and-mysteries', 'newwindow', 'width=550, height=400'); return false;">
              <span class="icon icon-social-googleplus"></span>
            </a>
          </div>

          
            <div id="disqus_thread" class="article-comments"></div>
            <script>
              (function() {
                  var d = document, s = d.createElement('script');
                  s.src = '//koderme.disqus.com/embed.js';
                  s.setAttribute('data-timestamp', +new Date());
                  (d.head || d.body).appendChild(s);
              })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          
        </article>
        <footer class="footer reveal">
<center>
  <p>
    I didn't come this far to only come this far.
    <br>
    
    <a href="/">Vinay Jain</a>
    
  </p>
</center>
</footer>

      </div>
    </div>
  </main>
  <script type="text/javascript" src="/assets/vendor.js"></script>
<script type="text/javascript" src="/assets/application.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
<script>
  WebFont.load({
    google: {
      families: ['Cormorant Garamond:700', 'Lato:300,400,700']
    }
  });
</script>


  <script>
    window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
    ga('create','UA-72339632-1','auto');ga('send','pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>


</body>
</html>
