<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Vinay Jain | Convert Objective C Macros To Swift Constants</title>
  <meta name="description" content="Learn basic and advanced techniques to use complex Objective C macros in Swift.">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="Convert Objective C Macros To Swift Constants">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/posts/objectivec-macros-to-swift-constants">
  <meta property="og:description" content="Learn basic and advanced techniques to use complex Objective C macros in Swift.">
  <meta property="og:site_name" content="Vinay Jain">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="/posts/objectivec-macros-to-swift-constants">
  <meta name="twitter:title" content="Convert Objective C Macros To Swift Constants">
  <meta name="twitter:description" content="Learn basic and advanced techniques to use complex Objective C macros in Swift.">

  
    <meta property="og:image" content="/assets/og-image-4893613393edc1a398364cdcc305a8d4dcc9b3fa825f63ede3796a93b6728073.jpg">
    <meta name="twitter:image" content="/assets/og-image-4893613393edc1a398364cdcc305a8d4dcc9b3fa825f63ede3796a93b6728073.jpg">
  

  <link href="/feed.xml" type="application/rss+xml" rel="alternate" title="Vinay Jain Last 10 blog posts">

  

  <link rel="icon" type="image/x-icon" href="/assets/favicon-76aee1bb64c19661c5d590850476b94b2f3e94cbb47271f9d285dea5b2712d76.ico">
  <link rel="apple-touch-icon" href="/assets/apple-touch-icon-119122b52243c7aa9996be4d777d7083eccb4efd9ef85e36abc7b9c2db3eb0cb.png">

  
    <link rel="stylesheet" type="text/css" href="/assets/light-3db04db3b0a2309ab03333699232f4bfec0b283bd28b132e3236291f19b332b7.css">
  
</head>

<body>
  <main>
    <div class="grid grid-centered">
      <div class="grid-cell">
        <nav class="header-nav scrollappear">
  <a href="/" class="header-logo" title="Vinay Jain">Vinay Jain</a>
  <br>Keyboards &amp; Pencils
  <ul class="header-links">
    
    
      <li>
        <a href="https://twitter.com/v1n4yjn" rel="noreferrer noopener" target="_blank" title="Twitter">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-twitter">
  <use href="/assets/twitter-8842c33965263ad1b03a978406826677a668f94125d5837e70ab83f24b3213a7.svg#icon-twitter" xlink:href="/assets/twitter-8842c33965263ad1b03a978406826677a668f94125d5837e70ab83f24b3213a7.svg#icon-twitter"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="https://www.facebook.com/vinay.jn7" rel="noreferrer noopener" target="_blank" title="Facebook">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-facebook">
  <use href="/assets/facebook-72c99b26d37bee65607720abb23d26b44ef30cca1187f98b0d9305be1230b1bf.svg#icon-facebook" xlink:href="/assets/facebook-72c99b26d37bee65607720abb23d26b44ef30cca1187f98b0d9305be1230b1bf.svg#icon-facebook"></use>
</svg>

        </a>
      </li>
    
    
    
      <li>
        <a href="https://github.com/vinayjn" rel="noreferrer noopener" target="_blank" title="GitHub">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-github">
  <use href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github" xlink:href="/assets/github-094f81040819f34343ee6ffff0980f17e2807b08b595eaaf66ae3554934fd78d.svg#icon-github"></use>
</svg>

        </a>
      </li>
    
    
    
    
      <li>
        <a href="https://stackoverflow.com/users/2286267" rel="noreferrer noopener" target="_blank" title="Stack Overflow">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-stackoverflow">
  <use href="/assets/stackoverflow-12ba59133ed134d26156d30f095e0222b6039395cf26f2fab0cb6ce3ef2db00d.svg#icon-stackoverflow" xlink:href="/assets/stackoverflow-12ba59133ed134d26156d30f095e0222b6039395cf26f2fab0cb6ce3ef2db00d.svg#icon-stackoverflow"></use>
</svg>

        </a>
      </li>
    
    
    
    
      <li>
        <a href="https://www.linkedin.com/in/vinayjn" rel="noreferrer noopener" target="_blank" title="LinkedIn">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-linkedin">
  <use href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin" xlink:href="/assets/linkedin-cdc5c107044324a3dfbea2e9ead15873f8dee304c37d73a046988956b706256e.svg#icon-linkedin"></use>
</svg>

        </a>
      </li>
    
    
    
    
      <li>
        <a href="https://instagram.com/vinayjn7" rel="noreferrer noopener" target="_blank" title="Instagram">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-instagram">
  <use href="/assets/instagram-37f85bc75b43ecc4c114d9a46f846327fe13c5893787c6afbcfef9d30d58bd9e.svg#icon-instagram" xlink:href="/assets/instagram-37f85bc75b43ecc4c114d9a46f846327fe13c5893787c6afbcfef9d30d58bd9e.svg#icon-instagram"></use>
</svg>

        </a>
      </li>
    
    
    
    
    
    
    
    
    
    
      <li>
        <a href="mailto:vinay.jn7@gmail.com" title="Email">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-email">
  <use href="/assets/email-782473193bf750036fdb90e8daa075508a20509d01854c09f3237c144a3f0601.svg#icon-email" xlink:href="/assets/email-782473193bf750036fdb90e8daa075508a20509d01854c09f3237c144a3f0601.svg#icon-email"></use>
</svg>

        </a>
      </li>
    
    
      <li>
        <a href="/feed.xml" rel="noreferrer noopener" target="_blank" title="RSS">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon-rss">
  <use href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss" xlink:href="/assets/rss-541ec5cea9cefd10d2fcfec01888f3f231a8829940249835fa7b7b3a12ae0d0d.svg#icon-rss"></use>
</svg>

        </a>
      </li>
    
  </ul>
</nav>

        <article class="article scrollappear">
          <header class="article-header">
            <h1>Convert Objective C Macros To Swift Constants</h1>
            <p>Learn basic and advanced techniques to use complex Objective C macros in Swift.</p>
            <div class="article-list-footer">
              <span class="article-list-date">
                November 13, 2015
              </span>
              <span class="article-list-divider">-</span>
              <span class="article-list-minutes">
                
                
                  3 minute read
                
              </span>
              <span class="article-list-divider">-</span>
              <div class="article-list-tags">
                
                  <a href="/tag/ios">ios</a>
                
                  <a href="/tag/swift">swift</a>
                
                  <a href="/tag/objc">objc</a>
                
              </div>
            </div>
          </header>

          <div class="article-content">
            <p><a href="">Objective C</a> inherits the capabilities and features of <a href="">C</a> so you can write C like <a href="">directives</a> or preprocessors and the Objective C compiler(<a href="">LLVM</a>) won’t complain.</p>

<p>#define is one such preprocessor which asks the compiler to replace the occurrence of a particular set of characters with another set of characters before compiling the source file. #define is also a great way of defining constants</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="cp">#define REPLACE_ME @"With This String"</span></code></pre></figure>

<p>This is a simple Macro, just by looking at it you can understand what it does. At compile time every occurrence of <code class="highlighter-rouge">REPLACE_ME</code> will be replaced by <code class="highlighter-rouge">With This String</code>.</p>

<p>After the introduction of Swift Programming Language app developers started porting their apps to Swift’s modern syntax. The above macro can be easily ported to Swift with the <code class="highlighter-rouge">let</code> keyword.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nv">REPLACE_ME</span> <span class="o">=</span> <span class="s">"With This String"</span></code></pre></figure>

<p>The new syntax : its clean, its short and it isn’t scary. The code porting was easy. However, if you have worked on an app with thousands of source files(yes, .m files) then you may be used to see these type of complex macros.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="cp">#define DISPATCH_BACKGROUND_QUEUE(name,function) dispatch_queue_t backgroundQueue = dispatch_queue_create(name, 0); dispatch_async(backgroundQueue, ^{function});</span>

<span class="cp">#define DISPATCH_MAIN_QUEUE(function) dispatch_async(dispatch_get_main_queue(), ^{function});</span></code></pre></figure>

<p>If you have seen macros like these and you are going to port these to Swift then read further.</p>

<p>Lets see this code in action. I am considering the background queue.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kt">DISPATCH_BACKGROUND_QUEUE</span><span class="p">(</span><span class="s">"BackgroundQueue"</span><span class="p">,</span>

		<span class="c1">// Do some background stuff like file / database read write</span>
		<span class="c1">// Do some thing else</span>
		<span class="c1">// May be print some logs to debug</span>
	<span class="p">)</span></code></pre></figure>

<p>The code block above is a simpler way of writing this :</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="n">dispatch_queue_t</span> <span class="n">backgroundQueue</span> <span class="o">=</span> <span class="nf">dispatch_queue_create</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="nf">dispatch_async</span><span class="p">(</span><span class="n">backgroundQueue</span><span class="p">,</span> <span class="o">^</span><span class="p">{</span>

		<span class="c1">// Do some background stuff like file / database read write</span>
		<span class="c1">// Do some thing else</span>
		<span class="c1">// May be print some logs to debug</span>
	<span class="p">});</span></code></pre></figure>

<p>Just to keep you in sync, this block of code executes the code between <code class="highlighter-rouge">^{ }</code> in a background thread without blocking the main thread. You can read more about it by referring to <a href="">Grand Central Dispatch</a>.</p>

<h3 id="porting-complex-objective-c-macros-to-swift-constants">Porting Complex Objective C macros to Swift Constants</h3>

<p>If you are new to Swift and not comfortable in writing closures I would highly recommend the following references on Swift Closures</p>

<ul>
  <li><a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Closures.html">Swift Closures - Apple Docs</a></li>
  <li><a href="http://fuckingclosuresyntax.com/">How Do I Declare a Closure in Swift?</a></li>
  <li><a href="http://fuckingswiftblocksyntax.com/">Swift closures and functions</a></li>
</ul>

<p>If you have gone through the following referrence I can expect you knowing that the complex macro in Objective C can be ported to Swift with the help of functions. I will try to make it as simple as I can by porting it word by word.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="cp">#define DISPATCH_BACKGROUND_QUEUE(name,function) dispatch_queue_t backgroundQueue = dispatch_queue_create(name, 0); 																				dispatch_async(backgroundQueue, ^{function});</span></code></pre></figure>

<p>The macro accepts two parameters one is a string and another is a code block. In Swift we can easily pass a block of code to another function with the help of Closures.</p>

<p><strong>ObjC :</strong></p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="cp">#define DISPATCH_BACKGROUND_QUEUE(name,function)</span></code></pre></figure>

<p><strong>Swift :</strong></p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="kt">DISPATCH_BACKGROUND_QUEUE</span><span class="p">(</span><span class="nv">queueName</span> <span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">codeBlock</span><span class="p">:()</span><span class="o">-&gt;</span><span class="p">())</span></code></pre></figure>

<p>A Swift function with two parameters, as simple as that.</p>

<p><strong>ObjC :</strong></p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="cp">#define DISPATCH_BACKGROUND_QUEUE(name,function) dispatch_queue_t backgroundQueue = dispatch_queue_create(name, 0); 																	dispatch_async(backgroundQueue, ^{function});</span></code></pre></figure>

<p><strong>Swift :</strong></p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kd">func</span> <span class="kt">BGQueue</span><span class="p">(</span><span class="nv">codeBlock</span><span class="p">:()</span><span class="o">-&gt;</span><span class="p">(),</span> <span class="nv">queueName</span> <span class="p">:</span> <span class="kt">String</span><span class="p">){</span>
    <span class="k">let</span> <span class="nv">queue</span> <span class="o">=</span> <span class="nf">dispatch_queue_create</span><span class="p">(</span><span class="n">queueName</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="nf">dispatch_async</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span> <span class="p">{</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span>
        <span class="nf">codeBlock</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>


          </div>
          <div class="article-share">
            
            
            <a href="https://twitter.com/home?status=Convert+Objective+C+Macros+To+Swift+Constants%20-%20/posts/objectivec-macros-to-swift-constants%20by%20@v1n4yjn" title="Share on Twitter" rel="noreferrer noopener" target="_blank">
              <svg viewbox="0 0 512 512"><path d="M492 109.5c-17.4 7.7-36 12.9-55.6 15.3 20-12 35.4-31 42.6-53.6 -18.7 11.1-39.4 19.2-61.5 23.5C399.8 75.8 374.6 64 346.8 64c-53.5 0-96.8 43.4-96.8 96.9 0 7.6 0.8 15 2.5 22.1 -80.5-4-151.9-42.6-199.6-101.3 -8.3 14.3-13.1 31-13.1 48.7 0 33.6 17.2 63.3 43.2 80.7C67 210.7 52 206.3 39 199c0 0.4 0 0.8 0 1.2 0 47 33.4 86.1 77.7 95 -8.1 2.2-16.7 3.4-25.5 3.4 -6.2 0-12.3-0.6-18.2-1.8 12.3 38.5 48.1 66.5 90.5 67.3 -33.1 26-74.9 41.5-120.3 41.5 -7.8 0-15.5-0.5-23.1-1.4C62.8 432 113.7 448 168.3 448 346.6 448 444 300.3 444 172.2c0-4.2-0.1-8.4-0.3-12.5C462.6 146 479 129 492 109.5z"></path></svg>
            </a>
            <a href="https://www.facebook.com/sharer/sharer.php?u=/posts/objectivec-macros-to-swift-constants" title="Share on Facebook" rel="noreferrer noopener" target="_blank">
              <svg viewbox="0 0 512 512"><path d="M288 192v-38.1c0-17.2 3.8-25.9 30.5-25.9H352V64h-55.9c-68.5 0-91.1 31.4-91.1 85.3V192h-45v64h45v192h83V256h56.4l7.6-64H288z"></path></svg>
            </a>
            <a href="https://plus.google.com/share?url=/posts/objectivec-macros-to-swift-constants" title="Share on Google+" rel="noreferrer noopener" target="_blank">
              <svg viewbox="0 0 128 128"><path d="M40.7 55.9v16.1c0 0 15.6 0 22 0C59.2 82.5 53.8 88.2 40.7 88.2c-13.3 0-23.7-10.8-23.7-24.2s10.4-24.2 23.7-24.2c7.1 0 11.6 2.5 15.8 5.9 3.3-3.3 3.1-3.8 11.6-11.9 -7.2-6.6-16.8-10.6-27.4-10.6C18.2 23.3 0 41.5 0 64c0 22.5 18.2 40.7 40.7 40.7 33.6 0 41.8-29.3 39-48.8H40.7zM113.9 56.7V42.6h-10.1v14.1H89.4v10.1h14.5v14.5h10.1V66.8H128V56.7H113.9z"></path></svg>
            </a>
          </div>

          
            <div id="disqus_thread" class="article-comments"></div>
            <script src="https://koderme.disqus.com/embed.js" async defer></script>
            <noscript>Please enable JavaScript to view the comments.</noscript>
          
        </article>
        <footer class="footer scrollappear">
  <center>
    <p>
      I didn't come this far to only come this far.
      <br>
      
      <a href="/">Vinay Jain</a>
      
    </p>
  </center>
</footer>

      </div>
    </div>
  </main>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-72339632-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-72339632-1');
  </script>


<script type="text/javascript" src="/assets/vendor-268c7ae814c16b5b0e479d3d34c0d1ff58337e15696af4994e19dd21d116eaa5.js"></script>


  <script type="text/javascript" src="/assets/webfonts-e3010885de8c083c4b2935d463b1649e8796191a66a1b43bb87ef04bbcce420d.js"></script>



  <script type="text/javascript" src="/assets/scrollappear-e2da8ea567e418637e31266cc5302126eaa79f62a2273739086358b589a89ee6.js"></script>


<script type="text/javascript" src="/assets/application-cd43a7f9bd8a08997bb19229cd040e7129ede0a1adf77c693b5835c9f8c2a4b1.js"></script>

</body>
</html>
