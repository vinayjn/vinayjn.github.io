<!DOCTYPE html> <html lang="en"><head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Writing better UITableView code with Swift Generics | Vinay Jain</title> <meta name="generator" content="Jekyll v4.2.0"/> <meta property="og:title" content="Writing better UITableView code with Swift Generics"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="With Generics write reusable UITableViewControllers in Swift."/> <meta property="og:description" content="With Generics write reusable UITableViewControllers in Swift."/> <link rel="canonical" href="https://vinayjain.me/posts/swift-generics-uitableview"/> <meta property="og:url" content="https://vinayjain.me/posts/swift-generics-uitableview"/> <meta property="og:site_name" content="Vinay Jain"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2016-07-04T14:24:55+02:00"/> <meta name="twitter:card" content="summary"/> <meta property="twitter:title" content="Writing better UITableView code with Swift Generics"/> <meta name="twitter:site" content="@vinayjn7"/> <meta name="google-site-verification" content="aiR9EuE5YjF6QsTSZzDbX_aQcQQINSTVPMgT1ru97ls"/> <script type="application/ld+json">
{"url":"https://vinayjain.me/posts/swift-generics-uitableview","@type":"BlogPosting","headline":"Writing better UITableView code with Swift Generics","dateModified":"2016-07-04T14:24:55+02:00","datePublished":"2016-07-04T14:24:55+02:00","description":"With Generics write reusable UITableViewControllers in Swift.","mainEntityOfPage":{"@type":"WebPage","@id":"https://vinayjain.me/posts/swift-generics-uitableview"},"@context":"https://schema.org"}</script> <link rel="stylesheet" href="/assets/css/normalize.css"> <link id="theme-link" rel="stylesheet" href="/assets/css/light.css"><link type="application/atom+xml" rel="alternate" href="https://vinayjain.me/feed.xml" title="Vinay Jain"/><script async src="https://www.googletagmanager.com/gtag/js?id=UA-128287990-1"></script> <script>function gtag(){dataLayer.push(arguments)}window["ga-disable-UA-128287990-1"]="1"===window.doNotTrack||"1"===navigator.doNotTrack||"yes"===navigator.doNotTrack||"1"===navigator.msDoNotTrack,window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-128287990-1");</script> </head> <body><header> <div class="wrapper header"> <div class="upper"> <a href="/" class="left-nav"> <h5 class="mClear nav-root"> $ cd /home/</h5> <span class="nav-cursor"></span> </a> <div class="right-nav"> <nav> <a id="menu" class="burger-nav"> <svg class="icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z"/> <path d="M2 12.0322C2 11.4799 2.44772 11.0322 3 11.0322H21C21.5523 11.0322 22 11.4799 22 12.0322C22 12.5845 21.5523 13.0322 21 13.0322H3C2.44772 13.0322 2 12.5845 2 12.0322Z"/> <path d="M3 17.0645C2.44772 17.0645 2 17.5122 2 18.0645C2 18.6167 2.44772 19.0645 3 19.0645H21C21.5523 19.0645 22 18.6167 22 18.0645C22 17.5122 21.5523 17.0645 21 17.0645H3Z"/> </svg> </a> <ul id="nav-trigger"> <li><a href="/all-posts/"> Blog</a></li><li><a href="/bookshelf/"> Books</a></li><li><a href="/shorts/"> Shorts</a></li><li><a href="/usesthis/"> Uses This</a></li> </ul> </nav> </div> </div><ul class="social-links"><li class="social-link"> <a target="_blank" href="https://www.linkedin.com/in/vinayjn/"> <svg class="icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M13 21H9V9H13V11C13.8526 9.91525 15.1456 9.26857 16.525 9.237C19.0056 9.25077 21.0072 11.2694 21 13.75V21H17V14.25C16.84 13.1326 15.8818 12.3036 14.753 12.306C14.2593 12.3216 13.7932 12.5378 13.4624 12.9046C13.1316 13.2715 12.9646 13.7573 13 14.25V21ZM7 21H3V9H7V21ZM5 7C3.89543 7 3 6.10457 3 5C3 3.89543 3.89543 3 5 3C6.10457 3 7 3.89543 7 5C7 5.53043 6.78929 6.03914 6.41421 6.41421C6.03914 6.78929 5.53043 7 5 7Z"/> </svg> </a> </li><li class="social-link"> <a target="_blank" href="https://github.com/vinayjn"> <svg class="icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M12.026 2C7.13295 1.99937 2.96183 5.54799 2.17842 10.3779C1.395 15.2079 4.23061 19.893 8.87302 21.439C9.37302 21.529 9.55202 21.222 9.55202 20.958C9.55202 20.721 9.54402 20.093 9.54102 19.258C6.76602 19.858 6.18002 17.92 6.18002 17.92C5.99733 17.317 5.60459 16.7993 5.07302 16.461C4.17302 15.842 5.14202 15.856 5.14202 15.856C5.78269 15.9438 6.34657 16.3235 6.66902 16.884C6.94195 17.3803 7.40177 17.747 7.94632 17.9026C8.49087 18.0583 9.07503 17.99 9.56902 17.713C9.61544 17.207 9.84055 16.7341 10.204 16.379C7.99002 16.128 5.66202 15.272 5.66202 11.449C5.64973 10.4602 6.01691 9.5043 6.68802 8.778C6.38437 7.91731 6.42013 6.97325 6.78802 6.138C6.78802 6.138 7.62502 5.869 9.53002 7.159C11.1639 6.71101 12.8882 6.71101 14.522 7.159C16.428 5.868 17.264 6.138 17.264 6.138C17.6336 6.97286 17.6694 7.91757 17.364 8.778C18.0376 9.50423 18.4045 10.4626 18.388 11.453C18.388 15.286 16.058 16.128 13.836 16.375C14.3153 16.8651 14.5612 17.5373 14.511 18.221C14.511 19.555 14.499 20.631 14.499 20.958C14.499 21.225 14.677 21.535 15.186 21.437C19.8265 19.8884 22.6591 15.203 21.874 10.3743C21.089 5.54565 16.9181 1.99888 12.026 2Z"/> </svg> </a> </li><li class="social-link"> <a target="_blank" href="https://twitter.com/vinayjn7"> <svg class="icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M19.995 6.688C20.8914 6.15209 21.5622 5.30824 21.882 4.314C21.0397 4.81381 20.118 5.16588 19.157 5.355C17.8246 3.94553 15.7135 3.60253 14.0034 4.51766C12.2933 5.43279 11.4075 7.37949 11.841 9.27C8.39062 9.09678 5.17598 7.46692 2.99702 4.786C1.85986 6.74742 2.44097 9.25479 4.32502 10.516C3.64372 10.4941 2.97754 10.3096 2.38202 9.978C2.38202 9.996 2.38202 10.014 2.38202 10.032C2.38241 12.0752 3.82239 13.8351 5.82502 14.24C5.19308 14.4119 4.53022 14.4372 3.88702 14.314C4.45021 16.0613 6.06057 17.2583 7.89601 17.294C6.37585 18.4871 4.49849 19.1342 2.56602 19.131C2.22349 19.1315 1.88123 19.1118 1.54102 19.072C3.50341 20.333 5.78738 21.0024 8.12001 21C11.3653 21.0223 14.484 19.7429 16.7787 17.448C19.0734 15.1531 20.3526 12.0343 20.33 8.789C20.33 8.603 20.3257 8.418 20.317 8.234C21.1575 7.62661 21.8828 6.87415 22.459 6.012C21.676 6.35907 20.8455 6.58693 19.995 6.688Z"/> </svg> </a> </li><li class="social-link"> <a target="_blank" href="https://stackoverflow.com/users/2286267/vinay-jain"> <svg class="icon" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <path d="M18.84 20.999H4.38098V14.599H5.98098V19.399H17.24V14.599H18.84V20.999ZM15.64 17.799H7.58098V16.199H15.636V17.799H15.64ZM15.64 15.799L7.78098 14.16L8.11898 12.608L15.98 14.25L15.637 15.799H15.64ZM16.079 13.762L8.79898 10.362V10.356L9.47298 8.899L16.754 12.299L16.081 13.763L16.079 13.762ZM17.002 11.917L10.832 6.777H10.841L11.854 5.563L18.016 10.699L16.999 11.918L17.002 11.917ZM18.31 10.417L13.503 3.968L14.813 2.999L19.619 9.45L18.307 10.421L18.31 10.417Z"/> </svg> </a> </li></ul> </div> </header><main class="page-content" aria-label="Content"> <div class="wrapper"> <article class="h-entry" itemscope itemtype="http://schema.org/BlogPosting"><h2 class="mClear page-title" itemprop="name headline">Writing better UITableView code with Swift Generics</h1> <div class="post-content e-content" itemprop="articleBody"> <p>I was obsessed with <code class="language-plaintext highlighter-rouge">Protocol Oriented Programming</code>, read a lot of blogs, watched so many videos and got some idea behind its implemetation and working. So now I know the basic protocol based programming stuff in <code class="language-plaintext highlighter-rouge">Swift</code> (the new cool ðŸ˜Ž), but I was still struggling to use POP in our current codebase. Tried, tired and again tried but couldnâ€™t get through.</p> <p>I tried the other way of writing reusable code and converted some of our codebase classes to follow this pattern.</p> <h3 id="swift--generics--uitableviewcontroller">Swift + Generics + UITableViewController</h3> <p>In most of the <code class="language-plaintext highlighter-rouge">UITableViewController</code>(TVC) subclasses or in <code class="language-plaintext highlighter-rouge">UIViewController</code> containing <code class="language-plaintext highlighter-rouge">UITableView</code> we override/implement these three methods of <code class="language-plaintext highlighter-rouge">UITableViewDataSource</code></p> <pre class="splash"><code><span class="keyword">override func</span> numberOfSectionsInTableView(tableView: <span class="type">UITableView</span>) -&gt; <span class="type">Int</span> { .. }

<span class="keyword">override func</span> tableView(tableView: <span class="type">UITableView</span>, numberOfRowsInSection section: <span class="type">Int</span>) -&gt; <span class="type">Int</span> { .. }

<span class="keyword">override func</span> tableView(tableView: <span class="type">UITableView</span>, cellForRowAtIndexPath indexPath: <span class="type">NSIndexPath</span>) -&gt; <span class="type">UITableViewCell</span> { .. }
</code></pre> <p>Instead of writing them in each subclass lets pull these methods from all of them and put them in a <code class="language-plaintext highlighter-rouge">GenericTVC</code>, our <code class="language-plaintext highlighter-rouge">GenericTVC.swift</code> now has</p> <pre class="splash"><code><span class="keyword">override func</span> numberOfSectionsInTableView(tableView: <span class="type">UITableView</span>) -&gt; <span class="type">Int</span> { .. }

<span class="keyword">override func</span> tableView(tableView: <span class="type">UITableView</span>, numberOfRowsInSection section: <span class="type">Int</span>) -&gt; <span class="type">Int</span> { .. }
</code></pre> <p>Every TVC we create from now will be a subclass of <code class="language-plaintext highlighter-rouge">GenericTVC</code>, so that we donâ€™t have to implement these two methods in each one of them. Next step is returning values from <code class="language-plaintext highlighter-rouge">numberOfSections</code> and <code class="language-plaintext highlighter-rouge">numberOfRows</code> and for this we will make a generic public dictionary in <code class="language-plaintext highlighter-rouge">GenericTVC</code>, you may want to add a 2D Swift array <code class="language-plaintext highlighter-rouge">[[String]]</code>. Add whatever is convenient for you.</p> <pre class="splash"><code><span class="keyword">var</span> dataSource : [<span class="type">String</span> : [<span class="type">Item</span>]] ? <span class="comment">// Item here is a model class which we use in our codebase. You can use anything of your choice.</span>
</code></pre> <p><code class="language-plaintext highlighter-rouge">GenericTVC</code> with implementations of these methods :</p> <pre class="splash"><code><span class="keyword">class</span> GenericTVC: <span class="type">UITableViewController</span> {

    <span class="keyword">var</span> datasource : [<span class="type">String</span> : [<span class="type">Item</span>]]?

    <span class="keyword">override func</span> viewDidLoad() {
        <span class="keyword">super</span>.<span class="call">viewDidLoad</span>()        
    }

    <span class="comment">// MARK: - Table view data source</span>

    <span class="keyword">override func</span> numberOfSectionsInTableView(tableView: <span class="type">UITableView</span>) -&gt; <span class="type">Int</span> {

        <span class="keyword">if let</span> datasource = datasource {
            <span class="keyword">return</span> datasource.<span class="property">keys</span>.<span class="property">count</span>
        }<span class="keyword">else</span>{
            <span class="keyword">return</span> <span class="number">0</span>
        }
    }

    <span class="keyword">override func</span> tableView(tableView: <span class="type">UITableView</span>, numberOfRowsInSection section: <span class="type">Int</span>) -&gt; <span class="type">Int</span> {

        <span class="keyword">if let</span> datasource = datasource {

        	<span class="comment">/*
            	Casting the section to String so as to get a key for datasource values
            	Int can also be used but its all your choice.
            	Which ever section you want in the tableView first, add it as :

            	self.datasource["0"] = [Item]()

            	and so on..
        	*/</span>

            <span class="keyword">let</span> sectionString = <span class="type">String</span>(section)
            <span class="keyword">if let</span> items = datasource[sectionString] {
                <span class="keyword">return</span> items.<span class="property">count</span>
            }
        }
        <span class="keyword">return</span> <span class="number">0</span>
    }   
}
</code></pre> <p>With this we have number of sections and also the number of rows in every section of our tableViews.</p> <p>The only method left is <code class="language-plaintext highlighter-rouge">cellForRowAtIndexPath:</code> which we are not going to implement in this <code class="language-plaintext highlighter-rouge">GenericTVC</code>(again, you can implement this too if you have same configuration of table view cells in your app) instead we will override this method in each of our <code class="language-plaintext highlighter-rouge">GenericTVC</code> subclass.</p> <p>We have our <code class="language-plaintext highlighter-rouge">FirstTableViewController</code> and a custom tableView cell <code class="language-plaintext highlighter-rouge">FirstTableViewCell</code></p> <pre class="splash"><code><span class="keyword">class</span> FirstTableViewController: <span class="type">GenericTVC</span> {

    <span class="keyword">override func</span> viewDidLoad() {

        <span class="keyword">super</span>.<span class="call">viewDidLoad</span>()
        <span class="keyword">self</span>.<span class="property">tableView</span>.<span class="call">registerClass</span>(<span class="type">FirstTableViewCell</span>.<span class="keyword">self</span>, forCellReuseIdentifier: <span class="type">String</span>(<span class="type">FirstTableViewCell</span>))
    }

    <span class="keyword">override func</span> tableView(tableView: <span class="type">UITableView</span>, cellForRowAtIndexPath indexPath: <span class="type">NSIndexPath</span>) -&gt; <span class="type">UITableViewCell</span> {

        <span class="keyword">var</span> thisCell : <span class="type">FirstTableViewCell</span>!

        <span class="keyword">if let</span> cell = tableView.<span class="call">dequeueReusableCellWithIdentifier</span>(<span class="type">String</span>(<span class="type">FirstTableViewCell</span>)) <span class="keyword">as</span>? <span class="type">FirstTableViewCell</span> {
            thisCell = cell
        }<span class="keyword">else</span>{
            thisCell = <span class="type">FirstTableViewCell</span>(style: .<span class="dotAccess">Default</span>, reuseIdentifier: <span class="type">String</span>(<span class="type">FirstTableViewCell</span>))
        }

        <span class="keyword">let</span> thisItem = <span class="keyword">self</span>.<span class="property">datasource</span>![<span class="type">String</span>(indexPath.<span class="property">section</span>)]![indexPath.<span class="property">row</span>]
        thisCell.<span class="property">textLabel</span>!.text = thisItem.<span class="property">itemName</span>

        <span class="keyword">return</span> thisCell

    }

}
</code></pre> <p>This code compiles and runs as expected, but we are not expected to write this in production. Lets refactor this code.</p> <p>The call to <code class="language-plaintext highlighter-rouge">tableView.registerClass</code> will be repeated for every class lets push it to superclass, <code class="language-plaintext highlighter-rouge">GenericTVC</code>. But what if we have a tableView which has multiple kinds of cell. Mmmmmm.. lets create another public property in <code class="language-plaintext highlighter-rouge">GenericTVC</code></p> <pre class="splash"><code><span class="keyword">var</span> reuseClasses : [<span class="type">AnyClass</span>]?
</code></pre> <p>and in <code class="language-plaintext highlighter-rouge">viewDidLoad</code> add this code :</p> <pre class="splash"><code><span class="keyword">if let</span> classes = reuseClasses {
    <span class="keyword">for</span> reuseClass <span class="keyword">in</span> classes {
        <span class="keyword">self</span>.<span class="property">tableView</span>.<span class="call">registerClass</span>(reuseClass, forCellReuseIdentifier: <span class="type">String</span>(reuseClass))
    }
}
</code></pre> <p>And in <code class="language-plaintext highlighter-rouge">FirstTableViewController</code></p> <p>Replace :</p> <pre class="splash"><code><span class="keyword">super</span>.<span class="call">viewDidLoad</span>()
<span class="keyword">self</span>.<span class="property">tableView</span>.<span class="call">registerClass</span>(<span class="type">FirstTableViewCell</span>.<span class="keyword">self</span>, forCellReuseIdentifier: <span class="type">String</span>(<span class="type">FirstTableViewCell</span>))
</code></pre> <p>With :</p> <pre class="splash"><code><span class="keyword">self</span>.<span class="property">reuseClasses</span> = [<span class="type">FirstTableViewCell</span>.<span class="keyword">self</span>] <span class="comment">// or may be self.reuseClasses = [FirstTableViewCell.self, SecondTableViewCell.cell, ThirdTableViewCell.self]</span>

<span class="keyword">super</span>.<span class="call">viewDidLoad</span>()
</code></pre> <p>The above code is self explanatory.</p> <p>Now come back to <code class="language-plaintext highlighter-rouge">cellForRowAtIndexPath:</code> in <code class="language-plaintext highlighter-rouge">FirstTableViewController</code>. Looks bad!. Lets move the cell initialization code to our base class. Add this method to <code class="language-plaintext highlighter-rouge">GenericTVC</code>:</p> <pre class="splash"><code><span class="keyword">func</span> reusableCellFor(tableView tableView : <span class="type">UITableView</span>, reuseClass : <span class="type">AnyClass</span>) -&gt; <span class="type">UITableViewCell</span> {
    <span class="keyword">if let</span> cell = tableView.<span class="call">dequeueReusableCellWithIdentifier</span>(<span class="type">String</span>(reuseClass)) {
        <span class="keyword">return</span> cell
    }<span class="keyword">else</span>{
        <span class="keyword">return</span> <span class="type">UITableViewCell</span>(style: .<span class="dotAccess">Subtitle</span>, reuseIdentifier: <span class="type">String</span>(reuseClass))
    }
}
</code></pre> <p>And in <code class="language-plaintext highlighter-rouge">FirstTableViewController</code> replace the cell initialization code with :</p> <pre class="splash"><code><span class="keyword">if let</span> cell = <span class="call">reusableCellFor</span>(tableView: tableView, reuseClass: (<span class="type">FirstTableViewCell</span>.<span class="keyword">self</span>)) <span class="keyword">as</span> <span class="type">FirstTableViewCell</span> {

}
</code></pre> <p>This piece of code works fine but I still donâ€™t like the downcast from <code class="language-plaintext highlighter-rouge">UITableViewCell</code> to <code class="language-plaintext highlighter-rouge">FirstTableViewCell</code>. Lets solve this by Generics.</p> <h4 id="generics-to-the-rescue">Generics to the rescue</h4> <p>With generics in Swift we can define methods(not only methods, actually everything ðŸ˜‰) which can accept generic parameters and return generic types. So lets use this feature for our good.</p> <p>In <code class="language-plaintext highlighter-rouge">GenericTVC</code> replace the implementation of <code class="language-plaintext highlighter-rouge">reusableCellFor....</code> with the below code.</p> <pre class="splash"><code><span class="keyword">func</span> reusableCellFor&lt;CustomTVC : <span class="type">UITableViewCell</span>&gt;(tableView tableView : <span class="type">UITableView</span>, reuseClass : <span class="type">CustomTVC</span>.<span class="type">Type</span>) -&gt; <span class="type">CustomTVC</span> {

    <span class="keyword">if let</span> cell = tableView.<span class="call">dequeueReusableCellWithIdentifier</span>(<span class="type">String</span>(reuseClass)) <span class="keyword">as</span>? <span class="type">CustomTVC</span> {
        <span class="keyword">return</span> cell
    }<span class="keyword">else</span>{
        <span class="keyword">return</span> <span class="type">CustomTVC</span>(style: .<span class="dotAccess">Subtitle</span>, reuseIdentifier: <span class="type">String</span>(reuseClass))
    }

}
</code></pre> <p>Wow, this looks fantastic ðŸ¤‘ðŸ¤‘ , but what is it ðŸ¤”ðŸ¤”?</p> <pre class="splash"><code>&lt;<span class="type">CustomTVC</span> : <span class="type">UITableViewCell</span>&gt;

<span class="comment">/*
This part of the method tells the compiler that here I introduce you to a generic type CustomTVC which is a subclass of UITableViewCell
so do not treat future occurrences of this as errors.
*/</span>

reuseClass : <span class="type">CustomTVC</span>.<span class="type">Type</span>

<span class="comment">/*
Accept a type which is a CustomTVC(UITableViewCell subclass)
*/</span>
</code></pre> <p>Everything else is self explanatory I guess ðŸ¤“.</p> <p>Finally in <code class="language-plaintext highlighter-rouge">FirstTableViewController</code> remove the <code class="language-plaintext highlighter-rouge">as FirstTableViewCell</code> and the also remove the <code class="language-plaintext highlighter-rouge">if let</code> check. And to keep the subclasses cleaner lets create a helper method in <code class="language-plaintext highlighter-rouge">GenericTVC</code> for getting the <code class="language-plaintext highlighter-rouge">Item</code> object from the datasource for current <code class="language-plaintext highlighter-rouge">indexPath</code>.</p> <pre class="splash"><code><span class="keyword">func</span> itemFor(indexPath indexPath : <span class="type">NSIndexPath</span>) -&gt; <span class="type">Item</span>? {
    <span class="keyword">if let</span> datasource = <span class="keyword">self</span>.<span class="property">datasource</span> {
        <span class="keyword">let</span> sectionString = <span class="type">String</span>(indexPath.<span class="property">section</span>)
        <span class="keyword">if let</span> array = datasource[sectionString] {
            <span class="keyword">return</span> array[indexPath.<span class="property">row</span>]
        }
    }
    <span class="keyword">return nil</span>
}
</code></pre> <p>The final versions of our files are below :</p> <p><strong>GenericTVC :</strong></p> <pre class="splash"><code><span class="keyword">class</span> GenericTVC: <span class="type">UITableViewController</span> {

    <span class="keyword">var</span> datasource : [<span class="type">String</span> : [<span class="type">Item</span>]]?
    <span class="keyword">var</span> reuseClasses : [<span class="type">AnyClass</span>]?
    <span class="keyword">override func</span> viewDidLoad() {
        <span class="keyword">super</span>.<span class="call">viewDidLoad</span>()

        <span class="keyword">if let</span> classes = reuseClasses {
            <span class="keyword">for</span> reuseClass <span class="keyword">in</span> classes {
                <span class="keyword">self</span>.<span class="property">tableView</span>.<span class="call">registerClass</span>(reuseClass, forCellReuseIdentifier: <span class="type">String</span>(reuseClass))
            }
        }
    }

    <span class="comment">// MARK: - Table view data source</span>

    <span class="keyword">override func</span> numberOfSectionsInTableView(tableView: <span class="type">UITableView</span>) -&gt; <span class="type">Int</span> {

        <span class="keyword">if let</span> datasource = datasource {
            <span class="keyword">return</span> datasource.<span class="property">keys</span>.<span class="property">count</span>
        }<span class="keyword">else</span>{
            <span class="keyword">return</span> <span class="number">0</span>
        }
    }

    <span class="keyword">override func</span> tableView(tableView: <span class="type">UITableView</span>, numberOfRowsInSection section: <span class="type">Int</span>) -&gt; <span class="type">Int</span> {

        <span class="keyword">if let</span> datasource = datasource {

            <span class="comment">/*
            	Casting the section to String so as to get a key for datasource values
            	Int can also be used but its all your choice.
            	Which ever section you want in the tableView first, add it as :

            	self.datasource["0"] = [Item]()

            	and so on..
        	*/</span>

            <span class="keyword">let</span> sectionString = <span class="type">String</span>(section)
            <span class="keyword">if let</span> array = datasource[sectionString] {
                <span class="keyword">return</span> array.<span class="property">count</span>
            }
        }
        <span class="keyword">return</span> <span class="number">0</span>
    }

    <span class="keyword">func</span> reusableCellFor&lt;CustomTVC : <span class="type">UITableViewCell</span>&gt;(tableView tableView : <span class="type">UITableView</span>, reuseClass : <span class="type">CustomTVC</span>.<span class="type">Type</span>) -&gt; <span class="type">CustomTVC</span> {
        <span class="keyword">if let</span> cell = tableView.<span class="call">dequeueReusableCellWithIdentifier</span>(<span class="type">String</span>(reuseClass)) <span class="keyword">as</span>? <span class="type">CustomTVC</span> {
            <span class="keyword">return</span> cell
        }<span class="keyword">else</span>{
            <span class="keyword">return</span> <span class="type">CustomTVC</span>(style: .<span class="dotAccess">Subtitle</span>, reuseIdentifier: <span class="type">String</span>(reuseClass))
        }
    }

    <span class="keyword">func</span> itemFor(indexPath indexPath : <span class="type">NSIndexPath</span>) -&gt; <span class="type">Item</span>? {
        <span class="keyword">if let</span> datasource = <span class="keyword">self</span>.<span class="property">datasource</span> {
            <span class="keyword">let</span> sectionString = <span class="type">String</span>(indexPath.<span class="property">section</span>)
            <span class="keyword">if let</span> array = datasource[sectionString] {
                <span class="keyword">return</span> array[indexPath.<span class="property">row</span>]
            }
        }
        <span class="keyword">return nil</span>
    }

}
</code></pre> <p><strong>FirstTableViewController :</strong></p> <pre class="splash"><code><span class="keyword">class</span> FirstTableViewController: <span class="type">GenericTVC</span> {

    <span class="keyword">override func</span> viewDidLoad() {
        <span class="keyword">self</span>.<span class="property">reuseClasses</span> = [<span class="type">FirstTableViewCell</span>.<span class="keyword">self</span>]

        <span class="keyword">self</span>.<span class="property">tableView</span>.<span class="call">registerClass</span>(<span class="type">FirstTableViewCell</span>.<span class="keyword">self</span>, forCellReuseIdentifier: <span class="type">String</span>(<span class="type">FirstTableViewCell</span>))

        <span class="keyword">super</span>.<span class="call">viewDidLoad</span>()
    }

    <span class="keyword">override func</span> tableView(tableView: <span class="type">UITableView</span>, cellForRowAtIndexPath indexPath: <span class="type">NSIndexPath</span>) -&gt; <span class="type">UITableViewCell</span> {
        <span class="keyword">let</span> cell = <span class="call">reusableCellFor</span>(tableView: tableView, reuseClass: (<span class="type">FirstTableViewCell</span>.<span class="keyword">self</span>))
        <span class="keyword">if let</span> item = <span class="call">itemFor</span>(indexPath: indexPath) {
            cell.<span class="property">textLabel</span>!.text = item.<span class="property">itemName</span>
        }
        <span class="keyword">return</span> cell
    }

}
</code></pre> <p>As you can see the resulting code for <code class="language-plaintext highlighter-rouge">FirstTableViewController</code> is shorter, readable and less scary.</p> <p>Thanks for reading ðŸ˜Š</p> </div><div id="disqus_thread"></div> <script>var disqus_config=function(){this.page.url="https://vinayjain.me/posts/swift-generics-uitableview",this.page.identifier="https://vinayjain.me/posts/swift-generics-uitableview"};!function(){var e=document,t=e.createElement("script");t.src="https://koderme.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}();</script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/posts/swift-generics-uitableview" hidden></a> </article> </div> </main> <footer> <p>Made with â™¥ï¸Ž by Vinay Jain</p> </footer> <script src="/assets/js/main.js?v=2"></script> </body> </html>